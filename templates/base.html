{% load static %}
<!doctype html>
<html lang="es" data-bs-theme="dark">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

    <!-- Chart.js para gr√°ficos -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Tipograf√≠a e √≠conos -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />

    <style>
        :root {
            /* üé® Paleta principal */
            --bs-primary: #10B981;
            --bs-primary-rgb: 16, 185, 129;
            --bs-link-color: #10B981;
            --bs-link-hover-color: #059669;

            /* üåô Modo oscuro */
            --bs-dark: #111827;
            --bs-body-bg: #111827;
            --bs-body-color: #9ca3af;
            --bs-border-color: #374151;
            --bs-light: #F9FAFB;

            /* üß± Fondo de tarjetas y modales */
            --bs-card-bg: #1f2937;
            --bs-dark-bg-subtle: #1f2937;
        }

        [data-bs-theme="dark"] {
            /* Colores base de inputs/selects en modo oscuro */
            --bs-form-control-bg: #111827;
            --bs-form-select-bg: #111827;
            --bs-form-control-color: #f9fafb;
            --bs-form-select-color: #f9fafb;
            --bs-form-control-border-color: #374151;
            --bs-form-select-border-color: #374151;
        }

        /* üß© Tipograf√≠a general */
        body,
        .btn,
        .navbar-brand,
        .nav-link,
        h1,
        h2,
        h3,
        h4,
        h5 {
            font-family: 'Inter', sans-serif;
        }

        /* üîó Estilos de enlaces de la navbar */
        .navbar-nav .nav-link {
            font-weight: 500;
            color: var(--bs-gray-400);
        }

        .navbar-nav .nav-link.active,
        .navbar-nav .nav-link:hover {
            color: var(--bs-primary);
        }

        /* üü¢ Bot√≥n principal (verde) */
        .btn-primary {
            --bs-btn-bg: var(--bs-primary);
            --bs-btn-border-color: var(--bs-primary);
            --bs-btn-hover-bg: #059669;
            --bs-btn-hover-border-color: #059669;
            --bs-btn-color: white;
            --bs-btn-font-weight: 700;
        }

        /* üîª Colores visuales para tipos de transacci√≥n */
        .gasto {
            color: #EF4444;
            font-weight: 600;
        }

        .ingreso {
            color: #22C55E;
            font-weight: 600;
        }

        /* üß≠ √çconos de Google Material */
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24
        }

        /* üí¨ Placeholder m√°s tenue en modo oscuro */
        [data-bs-theme="dark"] .form-control::placeholder {
            color: #6b7280;
        }

        /* ‚ú® Estilo de inputs al enfocar */
        [data-bs-theme="dark"] .form-control:focus,
        [data-bs-theme="dark"] .form-select:focus {
            background-color: #1f2937;
            border-color: var(--bs-primary);
            color: #f9fafb;
            box-shadow: 0 0 0 0.25rem rgba(var(--bs-primary-rgb), 0.25);
        }

        /* === Ajuste general para formularios en tema oscuro === */
        input.form-control,
        select.form-select,
        textarea.form-control {
            background-color: #1f2937 !important;
            /* mismo color que las tarjetas */
            color: #f8f9fa !important;
            /* texto claro */
            border: 1px solid #374151 !important;
            /* borde sutil gris */
            border-radius: 8px;
        }

        input.form-control:focus,
        select.form-select:focus,
        textarea.form-control:focus {
            background-color: #111827 !important;
            /* un poco m√°s oscuro al enfocar */
            color: #fff !important;
            border-color: #3b82f6 !important;
            /* azul claro de acento (pod√©s cambiarlo) */
            box-shadow: 0 0 0 0.2rem rgba(59, 130, 246, 0.25);
            /* sombra sutil */
        }

        /* === Labels y textos === */
        label {
            color: #e5e7eb !important;
            font-weight: 500;
        }

        /* === Placeholders === */
        ::placeholder {
            color: #9ca3af !important;
            /* gris claro */
        }

        /* === Botones de formulario === */
        button.btn-primary {
            background-color: #3b82f6 !important;
            /* azul de acento */
            border: none;
        }

        button.btn-primary:hover {
            background-color: #2563eb !important;
        }

        button.btn-outline-secondary {
            color: #9ca3af !important;
            border-color: #4b5563 !important;
        }

        button.btn-outline-secondary:hover {
            background-color: #374151 !important;
        }

        /* === Mensajes de error === */
        .is-invalid {
            border-color: #ef4444 !important;
        }

        .invalid-feedback {
            color: #f87171 !important;
        }

        .modal-content {
            background-color: #1f2937 !important;
            /* mismo color que las tarjetas */
            border: 1px solid #374151 !important;
            /* borde gris oscuro sutil */
            color: #f9fafb !important;
            /* texto claro */
        }

        /* Header del modal */
        .modal-header {
            border-bottom: 1px solid #374151 !important;
        }

        /* Footer del modal */
        .modal-footer {
            border-top: 1px solid #374151 !important;
        }

        /* T√≠tulo del modal */
        .modal-title {
            color: #f9fafb !important;
        }

        /* Bot√≥n de cerrar (la ‚ÄúX‚Äù) */
        .btn-close {
            filter: invert(1) grayscale(100%) brightness(150%);
        }

        /* Ajustar backdrop (fondo detr√°s del modal) */
        .modal-backdrop.show {
            background-color: rgba(0, 0, 0, 0.8) !important;
        }
    </style>

    <title>{% block title %}Spendly{% endblock %}</title>
</head>

<body class="bg-dark text-light">

    <!-- üß≠ Barra de navegaci√≥n superior -->
    <header
        class="navbar navbar-expand-md navbar-dark bd-navbar sticky-top bg-dark border-bottom border-secondary-subtle"
        style="--bs-bg-opacity: 0.8; backdrop-filter: blur(8px);">
        <nav class="container-xxl flex-wrap flex-md-nowrap" aria-label="Main navigation">

            <!-- Logo + Nombre -->
            <a class="navbar-brand p-0 me-4 d-flex align-items-center" href="{% url 'index' %}">
                <svg fill="var(--bs-primary)" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"
                    style="width: 24px; height: 24px;">
                    <path
                        d="M44 11.2727C44 14.0109 39.8386 16.3957 33.69 17.6364C39.8386 18.877 44 21.2618 44 24C44 26.7382 39.8386 29.123 33.69 30.3636C39.8386 31.6043 44 33.9891 44 36.7273C44 40.7439 35.0457 44 24 44C12.9543 44 4 40.7439 4 36.7273C4 33.9891 8.16144 31.6043 14.31 30.3636C8.16144 29.123 4 26.7382 4 24C4 21.2618 8.16144 18.877 14.31 17.6364C8.16144 16.3957 4 14.0109 4 11.2727C4 7.25611 12.9543 4 24 4C35.0457 4 44 7.25611 44 11.2727Z">
                    </path>
                </svg>
                <span class="ms-2 fs-5 fw-bold text-white">Spendly</span>
            </a>

            <!-- Bot√≥n responsive -->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#bdNavbar"
                aria-controls="bdNavbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <!-- Men√∫ principal -->
            <div class="collapse navbar-collapse" id="bdNavbar">
                {% if user.is_authenticated %}
                <ul class="navbar-nav flex-row flex-wrap bd-navbar-nav pt-2 py-md-0 ms-md-auto">

                    <!-- √çtems de navegaci√≥n -->
                    <li class="nav-item col-6 col-md-auto">
                        <a class="nav-link {% if request.resolver_match.url_name == 'index' %}active{% endif %}"
                            href="{% url 'index' %}">Dashboard</a>
                    </li>
                    <li class="nav-item col-6 col-md-auto">
                        <a class="nav-link {% if request.resolver_match.url_name == 'transaction_list' %}active{% endif %}"
                            href="{% url 'transaction_list' %}">Transacciones</a>
                    </li>
                    <li class="nav-item col-6 col-md-auto">
                        <a class="nav-link {% if request.resolver_match.url_name == 'manage_budgets' %}active{% endif %}"
                            href="{% url 'manage_budgets' %}">Presupuestos</a>
                    </li>
                    <li class="nav-item col-6 col-md-auto">
                        <a class="nav-link {% if request.resolver_match.url_name == 'reports' %}active{% endif %}"
                            href="{% url 'reports' %}">Informes</a>
                    </li>
                    <li class="nav-item col-6 col-md-auto">
                        <a class="nav-link {% if request.resolver_match.url_name == 'manage_accounts' %}active{% endif %}"
                            href="{% url 'manage_accounts' %}">Cuentas</a>
                    </li>
                    <li class="nav-item col-6 col-md-auto">
                        <a class="nav-link {% if request.resolver_match.url_name == 'manage_cards' %}active{% endif %}"
                            href="{% url 'manage_cards' %}">Tarjetas</a>
                    </li>
                    <li class="nav-item col-6 col-md-auto">
                        <a class="nav-link {% if request.resolver_match.url_name == 'manage_recurring' %}active{% endif %}"
                            href="{% url 'manage_recurring' %}">Gastos fijos</a>
                    </li>
                </ul>

                <!-- Bot√≥n de cierre de sesi√≥n -->
                <ul class="navbar-nav flex-row flex-wrap ms-md-3">
                    <li class="nav-item col-6 col-md-auto ms-2">
                        <form action="{% url 'logout' %}" method="post" class="d-flex">
                            {% csrf_token %}
                            <button class="btn btn-outline-secondary" type="submit">Cerrar Sesi√≥n</button>
                        </form>
                    </li>
                </ul>

                {% else %}
                <!-- Men√∫ para usuarios no logueados -->
                <ul class="navbar-nav flex-row flex-wrap bd-navbar-nav pt-2 py-md-0 ms-md-auto">
                    <li class="nav-item col-6 col-md-auto">
                        <a class="nav-link" href="{% url 'login' %}">Login</a>
                    </li>
                    <li class="nav-item col-6 col-md-auto">
                        <a class="nav-link" href="{% url 'signup' %}">Registro</a>
                    </li>
                </ul>
                {% endif %}
            </div>
        </nav>
    </header>

    <!-- Contenido din√°mico -->
    <main class="container-xl my-4 my-lg-5">
        {% block content %}
        {% endblock %}
    </main>

    <!-- Scripts Bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
</body>

</html>